---
title: "Sales"
author: "Hamdi Ahmed"
date: "19/07/2018"
output: html_document
---
The first part of the project is to come up with hypotheses about the data. This will help me to think about what I should expect to see from the data given the problem statement. 

>The data scientists at BigMart have collected 2013 sales data for 1559 products across 10 stores in different cities. Also, certain attributes of each product and store have been defined. The aim is to build a predictive model and find out the sales of each product at a particular store.
>
> Using this model, BigMart will try to understand the properties of products and stores which play a key role in increasing sales.

### **The Hypotheses**

I came up with the following hypothesis while thinking about the problem. These are just my thoughts and you can come-up with many more of these. Since we're talking about stores and products, lets make different sets for each.

##### **Store Level Hypotheses:**

1. **City type:** Stores located in urban or Tier 1 cities should have higher sales because of the higher income levels of people there.
2. **Population Density:** Stores located in densely populated areas should have higher sales because of more demand.
3. **Store Capacity:** Stores which are very big in size should have higher sales as they act like one-stop-shops and people would prefer getting everything from one place
4. **Competitors:** Stores having similar establishments nearby should have less sales because of more competition.
5. **Marketing:** Stores which have a good marketing division should have higher sales as it will be able to attract customers through the right offers and advertising.
6. **Location:** Stores located within popular marketplaces should have higher sales because of better access to customers.
7. **Customer Behavior:** Stores keeping the right set of products to meet the local needs of customers will have higher sales.
8. **Ambiance:** Stores which are well-maintained and managed by polite and humble people are expected to have higher footfall and thus higher sales.
9. **Tax** Stores in jurisdictions with low taxes should have more sales since a lower tax burden should leave more money left over for investmenting in processes which increase sales. 

##### **Product Level Hypotheses:**

1. **Brand:** Branded products should have higher sales because of higher trust in the customer.
2. **Packaging:** Products with good packaging can attract customers and sell more.
3. **Utility:** Daily use products should have a higher tendency to sell as compared to the specific use products.
4. **Display Area:** Products which are given bigger shelves in the store are likely to catch attention first and sell more.
5. **Visibility in Store:** The location of product in a store will impact sales. Ones which are right at entrance will catch the eye of customer first rather than the ones in back.
6. **Advertising:** Better advertising of products in the store will should higher sales in most cases.
7. **Promotional Offers:** Products accompanied with attractive offers and discounts will sell more.



### **The data**

``` {r}

test <- read.csv("Test.csv", stringsAsFactors = FALSE)
train <- read.csv("Train.csv", stringsAsFactors = FALSE)

```

Its generally a good idea to combine both train and test data sets into one, perform feature engineering and then divide them later again. This saves the trouble of performing the same steps twice on test and train. Lets combine them into a dataframe 'joined' with a 'source' column specifying where each observation belongs.

``` {r message = FALSE, echo = FALSE}
library(plyr)
library(dplyr)
library(tidyverse)
library(pastecs)
library(psych)
```

``` {r}

train$source <- "train"
test$source <- "test"

joined <- rbind.fill(train, test)
```

```{r}
dim(train)
```
```{r}
dim(test)
```
```{r}
dim(joined)
```
Thus we can see that "joined" has the same # of columns but rows are equivalent to both test and train. One of the key challenges in any data set is missing values. Lets start by checking which columns contain missing values.


```{r}

map(joined, ~sum(is.na(.)))
```

Note that the Item_Outlet_Sales is the target variable and missing values are ones in the test set. So we need not worry about it. But we'll impute the missing values in Item_Weight and Outlet_Size in the data cleaning section.

Lets look at some basic statistics for numerical variables.

```{r}

summary(joined)

```

Moving to nominal (categorical) variable, lets have a look at the number of unique values in each of them.

```{r}

map(joined, ~sum(!duplicated(.)))

```

This tells us that there are 1559 products and 10 outlets/stores (which was also mentioned in problem statement). Another thing that should catch attention is that Item_Type has 16 unique values. Let's explore further using the frequency of different categories in each nominal variable. I'll exclude the ID and source variables for obvious reasons.


